#include <iostream>
using namespace std;

int parent(int i){
    return (i - 1) / 2;
}

int leftChild(int i){
    return 2 * i + 1;
}

int rightChild(int i){
    return 2 * i + 2;
}

void heapify_up(int heap[], int index){
    while (index > 0 && heap[parent(index)] < heap[index]) {
        swap(heap[parent(index)], heap[index]);
        index = parent(index);
    }
}

void heapify_down(int heap[], int index, int size){
    while (true) {
        int left = leftChild(index);
        int right = rightChild(index);
        int largest = index;

        if (left < size && heap[left] > heap[largest])
            largest = left;

        if (right < size && heap[right] > heap[largest])
            largest = right;

        if (largest != index) {
            swap(heap[index], heap[largest]);
            index = largest;
        } else {
            break;
        }
    }
}

void insert(int value, int heap[], int &s){
    if (s == 10) {
        cout << "Max index reached, cannot insert";
        return;
    }

    heap[s] = value;
    heapify_up(heap, s);
    s++;
}

int delete_max(int heap[], int &s){
    if (s == 0) {
        cout << "Heap is empty";
        return;
    }

    int maxValue = heap[0];
    heap[0] = heap[s - 1];
    s--;

    heapify_down(heap, 0, s);

    return maxValue;
}

void update_key(int i, int new_val, int heap[]){
    heap[i] = new_val;
    heapify_up(heap, i);
}

int main() {
    int heap[10];
    int s = 0;

    insert(8, heap, s);
    insert(7, heap, s);
    insert(6, heap, s);
    insert(5, heap, s);
    insert(4, heap, s);

    cout << "Deleted max: " << delete_max(heap, s) << endl;

    return 0;
}
